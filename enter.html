<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatiable" content="ie=edge">
        <title> Форма регистрации </title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

        <link rel="stylesheet" href="css/2.css">  
    </head>
    
    <body>
        <div class="container mt-4" style="padding-right: 30px;">
            <h1>Форма регистрации</h1>
            <form action="" method="post">
                <input type="text" class="form-control" name="login" id="loginR" placeholder="Введи логин"> <br>
                <input type="password" class="form-control" name="pass" id="passR" placeholder="Придумай пароль"> <br>
                <input type="text" class="form-control" name="name" id="nameR" placeholder="Твой никнейм"> <br>
                <button id="create" class="btn btn-success" type="submit">Зарегистрировать</button>
            </form>
        </div>

        <div class="container mt-4">
            <h1>Форма авторизации</h1>
            <form name="enter" method="get">
                <input  type="text" class="form-control" name="login" id="loginE" placeholder="Введи логин"> <br>
                <input type="password" class="form-control" name="pass" id="passE" placeholder="Введи пароль"> <br>
                <button id="enter" class="btn btn-success">Авторизоваться</button>
            </form>
        </div>
    </body>
    <script>
        var btnCreate = document.getElementById('create');
        var btnEnter = document.getElementById('enter');
        const mysql = require("mysql");
        var send = "";

        btnCreate.addEventListener('click', ()=>{
            var login = document.getElementById('loginR').value;
            var name = document.getElementById('passR').value;
            var pass = document.getElementById('nameR').value;

            const connection = mysql.createConnection({
                host: 'localhost',
                user: 'root',
                password: '',
                database: 'Test'
            });
            connection.connect((err) => {
                if (err) throw err;
                const query = `INSERT INTO users (name, pass, login) VALUES (?, ?, ?)`;

                connection.query(query, [name, pass, login], (err, result) => {
                    if (err) {
                        throw err; // обработать ошибку подключения или выполнения запроса
                    } else {
                        alert('Пользователь добавлен!');
                    }
                    connection.end();
                });
            });

        });
        btnEnter.onclick = function(){
            var login = document.getElementById('loginE').value;
            var name = document.getElementById('passE').value;
            

            const connection = mysql.createConnection({
                host: 'localhost',
                user: 'root',
                password: '',
                database: 'Test'
            });
            connection.connect((err) => {
                if (err) throw err;
                console.log('Соединение с базой данных установлено!');

                const query = `INSERT INTO users (name, pass, login) VALUES (?, ?, ?)`;
                connection.query(query, [name, password, login], (err, result) => {
                    if (err) {
                        throw err; // обработать ошибку подключения или выполнения запроса
                    } else {
                        alert('Пользователь добавлен!');
                    }
                    connection.end();
                });
            });
        };
    </script>
</html>

